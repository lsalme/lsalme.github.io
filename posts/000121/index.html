<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="theme-color" content="#333333"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Chaos"><meta name="description" content="The microblog of Dreamcreator108"><meta name="generator" content="Hugo 0.53"><title>Ubuntu 18.04 修改交换空间 swap 大小 &middot; Microdream</title><link rel="shortcut icon" href="https://lsal.me/images/favicon.ico"><link rel="stylesheet" href="https://lsal.me/css/style.css"><link rel="stylesheet" href="https://lsal.me/css/highlight.css"><link rel="stylesheet" href="https://lsal.me/css/stotop.css"><link rel="stylesheet" href="https://lsal.me/css/font-awesome.min.css"><link href="https://lsal.me/index.xml" rel="alternate" type="application/rss+xml" title="Microdream"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"></head><body><div id="stotop-top"></div><nav class="main-nav"><a href="https://lsal.me/"><span class="arrow">←</span>Home</a> <a href="https://lsal.me/posts/">Archive</a> <a href="https://lsal.me/tags/">Tags</a> <a class="cta" href="https://lsal.me/index.xml">Subscribe</a></nav><div id="wrapper"><article class="post"><header><h1>Ubuntu 18.04 修改交换空间 swap 大小</h1><h2 class="headline">Jun 29, 2018 23:16 · 232 words · 1 minute read <span class="tags"><a href="https://lsal.me/tags/code/">code</a> <a href="https://lsal.me/tags/ubuntu/">ubuntu</a></span></h2></header><div id="post-body"><p>使用 Ubuntu 18.04 的安装镜像中的安装器，选择全盘使用并加密磁盘的方式，其交换空间 swap 默认划分的过小，不管物理内存多大，都是 998 MB。这给某些使用情景带来了不便。由于进行了加密，再次划分 swap 比较繁琐，目前可以使用 swapfile 的方式新建空间。</p><p>查看当前情况：</p><pre><code>sudo swapon --show
free -h
df -h
</code></pre><p>创建交换文件：</p><pre><code>sudo fallocate -l 1G /swapfile
ls -lh /swapfile
sudo chmod 600 /swapfile
ls -lh /swapfile
</code></pre><p>使用交换文件：</p><pre><code>sudo mkswap /swapfile
sudo swapon /swapfile
</code></pre><p>查看效果：</p><pre><code>sudo swapon --show
free -h
</code></pre><p>开机自动挂载：</p><pre><code>sudo cp /etc/fstab /etc/fstab.bak
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
</code></pre><p>编辑 <code>/etc/fstab</code> 删掉之前的 swap 挂载行：</p><pre><code>sudo vim /etc/fstab
</code></pre><h4 id="referrences">Referrences</h4><p><a href="https://bugs.launchpad.net/ubuntu/+source/partman-auto/+bug/1767299" target="_blank">Ubuntu 18.04 Installer creates swap partition too small</a></p><p><a href="https://help.ubuntu.com/community/ResizeEncryptedPartitions" target="_blank">ResizeEncryptedPartitions</a></p><p><a href="https://askubuntu.com/questions/226520/how-to-modify-size-of-swap-with-a-lvm-partition" target="_blank">how to modify size of swap with a lvm partition?</a></p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-16-04" target="_blank">How To Add Swap Space on Ubuntu 16.04</a></p></div></article><div id="disqus_thread"><div style="text-align:center"><button class="disqusbtn" id="load-disqus" onclick="disqus.load()">Click to Load Disqus Comments</button></div></div><script>var disqus_shortname="microdream",disqus={load:function(){var e;"object"!=typeof DISQUS&&((e=document.createElement("script")).type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e),$("#load-disqus").remove())}}</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><footer id="footer"><div id="social"><a class="symbol" href="https://dreamcreator108.com" target="_blank"><i class="fa fa-pencil-square"></i> </a><a class="symbol" href="https://t.me/dreamcreator108" target="_blank"><i class="fa fa-telegram"></i> </a><a class="symbol" href="https://twitter.com/dreamcreator108" target="_blank"><i class="fa fa-twitter-square"></i></a></div><p class="small">© Copyright 2019 · <a href="https://chaos.run">Chaos</a></p><p class="small">Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> Theme by Microdreamer Based on <a href="https://github.com/digitalcraftsman/hugo-cactus-theme" target="_blank">Cactus</a></p><a id="stotop" href="#stotop-top"><span></span></a></footer><script src="https://lsal.me/js/jquery-2.2.4.min.js"></script><script src="https://lsal.me/js/main.js"></script><script src="https://lsal.me/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="https://lsal.me/js/stotop.js"></script><script type="application/javascript">var doNotTrack=!1;doNotTrack||(!function(a,e,t,n,o,c,g){a.GoogleAnalyticsObject=o,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,c=e.createElement(t),g=e.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",g.parentNode.insertBefore(c,g)}(window,document,"script",0,"ga"),ga("create","UA-73408468-2","auto"),ga("send","pageview"))</script></body></html>